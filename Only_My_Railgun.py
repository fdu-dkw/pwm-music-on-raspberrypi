# =================================================================
# [info]
#
# name       : Only_My_Railgun
# description: play part of Only My Railgun
# platform   : RaspberryPi 4B+ (with Fudan University IES car kit)
# date       : 2023/4/14
# e-mail     : kwdeng22@m.fudan.edu.cn
# repository :https://github.com/fdu-dkw/pwm-music-on-raspberrypi
# -----------------------------------------------------------------
# [contributors]
#
# LIN Yin    | 2022 Computer Science & Technology| Fudan University
# DENG Kaiwen|         2022 Technological Science| Fudan University
# YU Jizhou  |         2022 Technological Science| Fudan University
# -----------------------------------------------------------------
# [N.B.]
#
# 1) Please read README.md before running relevant programs.
# 2) Make sure GPIO & L298N are correctly connected.
# 3) Tone test is advised before first use.
# 4) For a better effect, tuning is advised (use pwmTuna.py).
# =================================================================

import pwmMusic
from pwmMusic import HOLD

SECTION0 = [
    ['g_5', .5], ['g_5', .5], ['f_5', .25], ['g_5', .25]
] + 3 * [
    ['', .5], ['g_5', .5], ['f_5', .5], ['f_5', .25], ['g_5', .25],
    ['', .5], ['g_5', .5], ['g_5', .5], ['f_5', .25], ['g_5', .25]
]
trans = [
    ['', .5], ['b5', .5], ['a_5', .5], ['f_5', .5],
    ['f_5', .5], ['g_5', .25], ['g_5', .75], ['f_5', .5],
    ['f_5', .5], ['g_5', .25], ['g_5', .75], ['f_5', .5],
    ['f_5', .5], ['g_5', .25], ['g_5', .75], ['g_5', .5],
    ['g_5', .5], ['a_5', .5], ['b5', .5], ['c_6', .5],
]
SECTION1 = trans + [
    ['a_5', 1], ['f_5', 1], ['e6', 1], ['c_6', 1], ['c_6', .75], ['c_6', .75], ['d_6', .5]
] + trans + [
    ['g_5', 2],
    ['g_5', .5], ['a_5', .5], ['b5', .5], ['c_6', .5],
    ['a_5', 1], ['f_5', 1], ['d_5', 1], ['f_5', 1],
    ['f_5', .5], ['g_5', .25], ['g_5', .75], ['b5', .5],
    ['a_5', .5], ['f_5', .25], ['d_5', .75], ['f5', .5],
    ['f_5', .5], ['g_5', .25], ['g_5', 3.25]
]
SECTION2 = [
    ['g_5', 2],
    ['g_5', .5], ['g5', .5], ['g_5', .5], ['a_5', .5],
    ['g_5', 2],
    ['g_5', .5], ['g5', .5], ['g_5', .5], ['a_5', .5],
    ['c6', 2],
    ['c6', .5], ['c_6', .5], ['c6', .5], ['a_5', .5],
    ['c6', .5], ['a_5', .5], ['g_5', .5], ['d_6', .5],
    ['c6', 2],

    ['g_5', 2],
    ['g_5', .5], ['g5', .5], ['g_5', .5], ['a_5', .5],
    ['g_5', 2],
    ['g_5', .5], ['g5', .5], ['g_5', .5], ['a_5', .5],
    ['c6', 1], ['f5', 1],
    ['a_5', .5], ['g_5', .5], ['g5', .5], ['g_5', .5],
    ['g5', 1.5], ['f5', .5],
    ['f5', 2],

    ['c6', .5], ['c6', .25], ['c6', .5], ['c6', .25],
    ['c6', 1], ['c6', .5], ['a_5', .5], ['g_5', .5],
    ['g5', 1], ['g5', .5], ['d_6', .25], ['d_6', 1.75],
    ['d_6', .25], ['d_6', .25],
    ['d_6', .5], ['c_6', .5], ['c6', .5], ['a_5', .5],
    ['c_6', .25], ['c6', .5], ['a_5', .75], ['g_5', .5],
    ['g5', .75], ['g5', .75], ['f5', .5],
    ['g_5', 2],

    ['g_5', .5], ['g_5', .25], ['g_5', .5], ['g_5', .25],
    ['g_5', 1], ['g_5', .5], ['a_5', .5], ['b5', .5],
    ['a_5', 1], ['a_5', .5], ['f_5', .25], ['f_5', 1.25],
    ['', .5], ['f_5', .5],
    ['f5', 1], ['f5', .5], ['d_5', .5],
    ['f5', .5], ['g5', .25], ['g_5', .75], ['g_5', .5],
    ['g_5', 3], ['g5', .25], ['f5', .25], ['g5', 2],

    ['d_6', .5], ['', .25], ['e6', .5], ['', .25], ['d_6', .5], ['', .25]
]

if __name__ == '__main__':
    pwmMusic.set(bpm=135, duty=25)
    pwmMusic.play(SECTION0)
    pwmMusic.play(SECTION1)
    pwmMusic.play(SECTION2)
    pwmMusic.play(SECTION1)
    pwmMusic.stop()
